<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
      /* Email styles need to be inline */
    </style>
  </head>

  <body>
    <h1><%= @project.name %> - <%= @project.status %></h1>

    <h2>Change Status</h2>
    <%= form_with url: update_status_project_path(@project.id), method: :patch do %>
      <%= select_tag :status, options_for_select(["Pending", "In Progress", "Completed"], @project.status) %>
      <%= submit_tag "Update Status" %>
    <% end %>

    <h2>Conversation History</h2>
    <ul>
      <% @project.status_changes.each do |change| %>
        <li>Project status changed from <%= change[:previous_status] %> to <%= change[:new_status] %> at <%= change[:created_at] %></li>
      <% end %>
    </ul>
    <ul>
      <% @project.comments.each do |comment| %>
        <li><%= comment[:content] %> - <%= comment[:created_at] %></li>
      <% end %>
    </ul>

    <h2>Leave a Comment</h2>
    <%= form_with url: project_comments_path(@project.id), method: :post do %>
      <%= text_area_tag :content %>
      <%= submit_tag "Comment" %>
    <% end %>
  </body>
</html>
